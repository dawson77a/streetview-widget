<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Street View Widget</title></head>
<body style="margin:0;">
  <div id="street-view" style="width:100%; height:100vh;">Loading Street View...</div>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCNVXC0Xkb_fm5mmikZgNqkArtK3uZwEA"></script>
  <script>
    function getParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const addr = getParam('address');
    if (!addr) {
      document.body.innerText = '❌ No address provided in URL.';
    } else {
      const geocoder = new google.maps.Geocoder();
      geocoder.geocode({ address: addr }, (results, status) => {
        const div = document.getElementById('street-view');
        if (status === "OK" && results[0]) {
          const loc = results[0].geometry.location;
          const iframe = document.createElement('iframe');
          iframe.style.border = '0';
          iframe.width = '100%';
          iframe.height = '100%';
          iframe.src = `https://www.google.com/maps/embed/v1/streetview?key=AIzaSyDCNVXC0Xkb_fm5mmikZgNqkArtK3uZwEA&location=${loc.lat()},${loc.lng()}&heading=210&pitch=10&fov=80`;
          div.innerHTML = '';
          div.appendChild(iframe);
        } else {
          div.innerText = '❌ Street View not available. Geocoder status: ' + status;
        }
      });
    }
  </script>
</body>
</html>

